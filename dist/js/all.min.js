!function(t,e){"use strict";var n={set:function(t,e,n){var o=arguments,r=arguments.length,n=r>2?o[2]:null,i=r>3?o[3]:null,a=r>4?o[4]:null,s=r>5?o[5]:!1;document.cookie=t+"="+escape(e)+(null===n?"":"; expires="+n.toGMTString())+(null===i?"":"; path="+i)+(null===a?"":"; domain="+a)+(s===!0?"; secure":"")},get:function(t){for(var e=t+"=",o=e.length,r=document.cookie.length,i=0;r>i;){var a=i+o;if(document.cookie.substring(i,a)==e)return n._getCookieVal(a);if(i=document.cookie.indexOf(" ",i)+1,0===i)break}return null},_getCookieVal:function(t){var e=document.cookie.indexOf(";",t);return-1==e&&(e=document.cookie.length),unescape(document.cookie.substring(t,e))},reset:function(t){var e=new Date;n.set(t,null,e)}},o={REMAINING_TIME:n.get("REMAINING_TIME")-0||18e5,POST_URL:"http://act.17173.com/2015/05/yxhhr0709/index.php",inter:null,countRightAnswer:0,questionArr:[],questionWrap:null,answerInfo:{name:null,qq:null,phone:null,email:null,questionInfo:{paperId:null,questionsId:[],answers:{}},takeTime:0,score:0},init:function(){var t=this,e=t.getRandomPaperId(4);n.get("REMAINING_TIME")&&n.get("PAPERID")&&"null"!==n.get("PAPERID")?($("#name").val(decodeURI(n.get("NAME"))),$("#phone").val(n.get("PHONE")),$("#email").val(n.get("EMAIL")),$("#qq").val(n.get("QQ")),t.renderQuestionsList(n.get("PAPERID")),$("#qArea").show(),t.bindEvent(!0),$("#start").off("clcik")):(t.renderQuestionsList(e),t.bindEvent())},bindEvent:function(e){var o=this,r=0;o.inter&&clearInterval(o.inter),e&&(o.inter=setInterval(function(){o.countDown()},1e3)),e&&(t.onbeforeunload=function(t){t=t||window.event,o.REMAINING_TIME>0&&(n.set("PAPERID",o.answerInfo.questionInfo.paperId),n.set("QUESTIONS",o.questionArr.join("---")),r=o.getAnswerNum(),r&&n.set("ANSWERS",JSON.stringify(o.answerInfo.questionInfo.answers)),t.returnValue="答题还未结束，确定要离开网页？")}),$("#start").off("click"),$("#submit").off("click"),$("#start").on("click",function(t){o.startListener(t,$(this))}),$("#submit").on("click",function(t){o.submitListener(t,$(this))})},startListener:function(t,e){var o=this,r=$("#name").val(),i=$("#phone").val(),a=$("#email").val(),s=$("#qq").val();return t.preventDefault(),e.off("click"),"block"===$("#qArea").css("display")?!1:void(""!==r&&/^([\u4e00-\u9fa5]){2,7}$/.test(r)?""!==i&&/^(13[0-9]|15[0|1|2|3|5|6|7|8|9]|18[0-9]|17[6|7|8])\d{8}$/.test(i)?""!==a&&/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(a)?""!==s&&/^\d{5,10}$/.test(s)?($(".time-bar").show(),o.bindEvent(!0),$.ajax({url:o.POST_URL+"?do=updateUserInfo",data:{name:r,email:a,mobile:i,qq:s},type:"post",dataType:"json"}).done(function(t){return o.answerInfo.name=r,o.answerInfo.phone=i,o.answerInfo.email=a,o.answerInfo.qq=s,n.set("NAME",encodeURI(r)),n.set("PHONE",i),n.set("EMAIL",a),n.set("QQ",s),3===t.status?(o.msgBox("alert",{title:"抱歉！",content:"您已经参加过答题，感谢您的支持！"}),e.on("click",function(t){o.startListener(t,$(this))}),!1):void $("#qArea").show()}).fail(function(t){o.msgBox("alert",{title:"抱歉！",content:"提交失败，请核对信息后重新提交~~"}),e.on("click",function(t){o.startListener(t,$(this))}),$("#qArea").show(),o.answerInfo.name=r,o.answerInfo.phone=i,o.answerInfo.email=a,o.answerInfo.qq=s,n.set("NAME",encodeURI(r)),n.set("PHONE",i),n.set("EMAIL",a),n.set("QQ",s)})):(o.msgBox("alert",{title:"抱歉！",content:"请输入正确QQ号码！"}),e.on("click",function(t){o.startListener(t,$(this))})):(o.msgBox("alert",{title:"抱歉！",content:"请输入正确邮箱！"}),e.on("click",function(t){o.startListener(t,$(this))})):(o.msgBox("alert",{title:"抱歉！",content:"请输入正确手机号码！"}),e.on("click",function(t){o.startListener(t,$(this))})):(o.msgBox("alert",{title:"抱歉！",content:"请输入正确姓名！"}),e.on("click",function(t){o.startListener(t,$(this))})))},submitListener:function(t,e){var n=this,o=n.getAnswerNum();t.preventDefault(),e.off("click"),40===o||n.REMAINING_TIME<=0?n.submitAnswers():n.loadPandora(function(){pandora.use(["confirm"],function(t){new t({importStyle:!0,title:"您好！",content:"您还有"+(40-o)+"题未回答，是否确认提交?"}).on({submit:function(){n.submitAnswers()},cancel:function(){e.on("click",function(t){n.submitListener(t,$(this))})}})})})},getAnswerNum:function(){var t=this,e=t.questionWrap,n=0,o=0,r="",i="";return e.find(".item").each(function(){r=$(this).data("questionid"),$(this).find("input").each(function(e){var a=$(this);return a.prop("checked")?(i=a.val(),1===a.data("goal")&&n++,o++,t.answerInfo.questionInfo.answers[r]=i,!1):void 0})}),t.countRightAnswer=n,o},countScore:function(){var t=this;return 2.5*(t.countRightAnswer-0)},getTakeTime:function(){var t=18e5-(n.get("REMAINING_TIME")-0),e=Math.floor(t/1e3/60%60),o=Math.floor(t/1e3%60);return 10>e?e="0"+e:e,10>o?o="0"+o:o,e+":"+o},submitAnswers:function(){var t=this,e=0,n=0;e=t.countScore(),n=t.getTakeTime(),t.answerInfo.takeTime=n,t.answerInfo.score=t.countScore(),$.ajax({url:t.POST_URL+"?do=save",data:{result:t.answerInfo.questionInfo.answers,time:t.answerInfo.takeTime,score:t.answerInfo.score,paperid:t.answerInfo.questionInfo.paperId},type:"post",dataType:"json"}).done(function(n){e>=85?t.msgBox("alert",{title:"答题结束，您得到了"+e+"分,",content:"我们将会把您的资料推荐给知名的游戏厂商，由厂商安排人员回访，谢谢！"}):t.msgBox("alert",{title:"答题结束，您得到了"+e+"分,",content:"抱歉，您的知识积累暂时还无法达到游戏制作人的要求，感谢您的参与，谢谢！"}),$("#submit").on("click",function(e){t.answeredTips()})}).fail(function(e){t.msgBox("alert",{title:"",content:"233~~答案迷失在二次元中，提交失败，请重新提交~~"}),t.REMAINING_TIME>0?$("#submit").on("click",function(e){t.submitListener(e,$(this))}):$("#submit").on("click",function(e){t.answeredTips()})})},answeredTips:function(){var t=this;t.msgBox("alert",{title:"抱歉！",content:"你已经参与过答题，感谢您的参与，谢谢！"})},countDown:function(){var t=this,e=0,o=0;t.REMAINING_TIME>=0?(e=Math.floor(t.REMAINING_TIME/1e3/60%60),o=Math.floor(t.REMAINING_TIME/1e3%60),10>o?o="0"+o:o):(t.msgBox("alert",{title:"抱歉！",content:"答题时间已用完，答案已自动提交，感谢您的参与，谢谢！"}),clearInterval(t.inter,1e3),t.REMAINING_TIME=0,$("#submit").trigger("click"),e=o="00"),$("#t_m").text(e+":"),$("#t_s").text(o),t.REMAINING_TIME-=1e3,n.set("REMAINING_TIME",t.REMAINING_TIME)},resortArr:function(t){if(!t.length)return!1;if(!t instanceof Array)return!1;var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(){return.5-Math.random()}),e},renderQuestionsList:function(t){var e=this,o="";$(".mod-bd").each(function(r){var i=$(this);return o=i.attr("data-testpaperid"),o===t?n.get("PAPERID")&&"null"!==n.get("PAPERID")?(e.questionArr=n.get("QUESTIONS").split("---"),JSON.parse(n.get("ANSWERS"))&&e.fillAnswers(),e.answerInfo.questionInfo.paperId=n.get("PAPERID"),e.questionWrap=i,e.show(i),!1):(i.find(".item").each(function(t){e.questionArr.push($("<p>").append($(this).clone()).html())}),e.questionArr=e.resortArr(e.questionArr),i.html(""),e.show(i),e.questionWrap=i,e.answerInfo.questionInfo.paperId=t,!1):void 0})},fillAnswers:function(){for(var t=this,o="",r="",i="",a=JSON.parse(n.get("ANSWERS")),s=t.questionArr.length-1;s>=0;s--)o=$(t.questionArr[s]),r=o.data("questionid"),a[r]!==e&&(i=a[r],o.find("input").each(function(e){var n=$(this);n.val()===i?n.attr("checked",!0):n.attr("checked",!1),o=n.parents(".item"),t.questionArr[s]=$("<p>").append(o.clone()).html()}))},show:function(t){for(var e=this,n="",o=e.questionArr.length-1;o>=0;o--)n+=e.questionArr[o],e.answerInfo.questionInfo.questionsId.push($(e.questionArr[o]).data("questionid"));t.html(n),t.show()},getRandomPaperId:function(t){return"p"+parseInt(Math.random()*t+1,0)},loadPandora:function(t){if($.isPlainObject(window.pandora))t&&$.isFunction(t)&&t();else{var e=document,n=e.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://ue.17173cdn.com/a/lib/pandora.js",n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=n.onload=null,t&&$.isFunction(t)&&t())},document.body.appendChild(n)}},msgBox:function(t,e){var n=this,o=e;o&&n.loadPandora(function(){pandora.use([t],function(t){new t({importStyle:!0,title:o.title,content:o.content})})})}};o.init()}(window,void 0),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,o,r,i,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(o=rep[n],r=str(o,u),r&&a.push(quote(o)+(gap?": ":":")+r));else for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r=str(o,u),r&&a.push(quote(o)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var o;if(gap="",indent="","number"==typeof n)for(o=0;n>o;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,o,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o=walk(r,n),void 0!==o?r[n]=o:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),$(".form-radio-con .form-radio-txt").click(function(t){$(this).parent().find("input").attr("checked","checked")}),function(){var t=(parseInt($(window).height()),parseInt($(".layer-side").height()),parseInt($(".layer-ref").offset().top)),e=(parseInt($(".layer-ref").height()),parseInt($(".layer-side").position().top)),n=$(window).scrollTop();if(n>=t)var o=n-t+e,r=o;else var r=e;$(".layer-side").css("top",r+"px"),$(window).scroll(function(){var t=$(window).scrollTop();if(t>=e)var n=t-45,o=n;else var o=e;$(".layer-side").css("top",o+"px")})}(),$(".list-question .item:odd").addClass("item-odd"),$(".comm-pop .btn-close").click(function(t){$(this).parents(".comm-pop").hide()}),pandora.use(["floating"],function(t){new t({contentWidth:1e3,element:"#floating",vertical:"middle",horizontal:"right",offset:{x:40,y:0}})});var timeT=$(".time-bar").offset().top;$(window).scroll(function(){$(window).scrollTop()>0?$(".go-top").css("display","block"):$(".go-top").css("display","none"),$(window).scrollTop()>timeT?$(".time-bar").addClass("time-bar-fixed"):$(".time-bar").removeClass("time-bar-fixed")});